
<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Open source Java implementation for RAFT consensus protocol.">
    <meta name="keywords" content="raft, java, ratis, library"/>
    <meta name="robots" content="index,follow"/>
    <meta name="language" content="en"/>

    <title>Apache Ratis</title>

    <base href="https://ratis.apache.org/">

    <link rel="canonical" href="https://ratis.apache.org/">

    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://www.apachecon.com/event-images/snippet.js"></script>
</head>

<body>


<div class="topnav">
    <div class="container">
        <ul class="breadcrumb col-md-6">
            <li>
                <img class="asf-logo" src="asf_feather.png" alt="ASF feather"/>
                <a  href="https://www.apache.org">Apache Software Foundation</a>
            </li>
        </ul>
        <div class="col-md-6">
            <ul class="pull-right breadcrumb">
                <li><a href="https://www.apache.org/licenses/">License</a></li>
                <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                <li><a href="https://www.apache.org/security/">Security</a></li>
                <li><a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a></li>
            </ul>
        </div>
    </div>
    <div class="container">
        <ul class="breadcrumb col-md-6">
            <li><h1 style="color:#000">
                <img src="logo-white.png" alt="Ratis logo" width="60" height="60" />
                <a href="https://ratis.apache.org/">Apache Ratis&trade;</a>
            </h1></li>
        </ul>
        <div class="col-md-6">
            <ul class="pull-right breadcrumb">
                <li><h1><a class="acevent" data-format="wide"></a>
                </h1></li>
            </ul>
        </div>
    </div>

    <nav class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#ratis-menu" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <div id="ratis-menu" class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="downloads.html">Download</a></li>
                    <li><a href="#gettingstarted">Getting started</a></li>
                    <li><a href="#source">Source</a></li>
                    <li><a href="#community">Community</a></li>
                    <li><a href="#resources">Resources</a></li>
                </ul>
            </div>
        </div>
    </nav>
</div>



<div class="topnav" style="background:#F0F0F0">
        <div class="container">
            <div class="jumbotron">
                <h1 style="color:#000">
                    Open source Java implementation for Raft consensus protocol.
                </h1>
            </div>
        </div>
</div>

<div class="container">
<h1>Docker Testing</h1>
<!---
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->
<p>The Docker orchestration is comprised of the following:</p>
<ol>
<li>A Docker image which has the necessary software to run the LogService</li>
<li>A docker-compose.yml file which can launch the necessary containers for a full-fledged LogService &ldquo;cluster&rdquo;</li>
<li>Scripts to build the Docker image and launch a client environment to interact
with a running cluster via Compose.</li>
</ol>
<h2 id="building-the-docker-image">Building the Docker image</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ mvn clean package assembly:single -DskipTests
</span></span><span style="display:flex;"><span>$ cd ratis-logservice <span style="color:#f92672">&amp;&amp;</span> ./build-docker.sh
</span></span></code></pre></div><p>The above will create a Docker image tagged as <code>ratis-logservice:latest</code>.</p>
<h2 id="launching-a-cluster-via-compose">Launching a cluster via Compose</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker-compose up -d
</span></span></code></pre></div><p>The Compose orchestration will launch three MetadataServer containers and three
Worker containers, all on the same Docker network. The <code>-d</code> option detaches the
container logs from your current shell.</p>
<h2 id="connecting-a-client">Connecting a client</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ./client-env.sh
</span></span><span style="display:flex;"><span>$ ./bin/shell &lt;...&gt;
</span></span><span style="display:flex;"><span>$ ./bin/load-test &lt;...&gt;
</span></span></code></pre></div><p>The <code>client-env.sh</code> script will launch a Docker container which is on the same
network as our cluster running in Compose.</p>
<h2 id="debugging-the-cluster">Debugging the cluster</h2>
<p>Use <code>docker logs</code> to inspect the output from a specific container. You must pass
the name of the container (obtained via <code>docker-compose ps</code> or <code>docker ps</code>) to
<code>docker logs</code>.</p>
<p>You can also &ldquo;attach&rdquo; to a container via <code>docker exec</code> to inspect the environment
in which the process is running. Again, using the name of a container obtained as
described above, use <code>docker exec -it &lt;name&gt; /bin/sh</code> to attach to the container.</p>

</div>

<footer>
    <div class="container">

        <div class="col-md-12 trademark">
            <p>&copy; 2025 <a href="http://apache.org">The Apache Software Foundation</a>,
                Apache, Apache Ratis, the Apache feather logo, and the Apache Ratis logo are trademarks of The Apache Software Foundation.
            <p>
        </div>
    </div>
</footer>


<script src="jquery.min.js"></script>
<script src="./js/underscore-min.js"></script>
<script src="bootstrap.min.js"></script>


</body>
</html>

